#!/usr/bin/env python
"""
Module for analyzing ctrax tracking results. Given a csv file generated by ctrax
 this module extracts the probability of turn, stop and meeting in movement of
 bees in the arena.

 Input:
    <path_to_ctrax_csv>

Example:
    python test_distribution.py ~/ctrax.csv

"""
from argparse import ArgumentParser

from core.csv_loader import CSVLoader
from core.distribution import DistributionAssessor


def main(csv_file):
    bees = CSVLoader.load_from_csv(csv_file)

    DistributionAssessor.all_paths(bees)
    DistributionAssessor.turn_probability(bees)
    DistributionAssessor.stop_probability(bees)
    collisions = DistributionAssessor.bee_meeting(csv_file)
    DistributionAssessor.communication_time(collisions)


if __name__ == '__main__':
    parser = ArgumentParser(prog=__file__[:-3], description=__doc__)
    parser.add_argument(
        '-v', '--version',
        action='version',
        version='%(prog)s v0.6'
    )

    parser.add_argument('ctrax_csv', help='file with results of ctrax tracking')
    args = parser.parse_args()

    main(args.ctrax_csv)
